<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RED808 Drum Machine</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="logo">RED<span>808</span></h1>
                <div class="status">
                    <span id="statusDot" class="status-dot"></span>
                    <span id="statusText">Conectando...</span>
                </div>
            </div>
            <div class="header-meters">
                <div class="meter" id="meter-bpm">
                    <span class="meter-label">BPM</span>
                    <span class="meter-hint">[ / ]</span>
                    <div class="meter-value" id="meterBpmValue">110</div>
                    <div class="meter-bar">
                        <span id="meterBpmBar"></span>
                    </div>
                </div>
                <div class="meter" id="meter-seq-volume">
                    <span class="meter-label">VOL SEQ</span>
                    <span class="meter-hint">A / S</span>
                    <div class="meter-value" id="meterSequencerVolumeValue">80%</div>
                    <div class="meter-bar">
                        <span id="meterSequencerVolumeBar"></span>
                    </div>
                </div>
                <div class="meter" id="meter-live-volume">
                    <span class="meter-label">VOL LIVE</span>
                    <span class="meter-hint">- / +</span>
                    <div class="meter-value" id="meterLiveVolumeValue">80%</div>
                    <div class="meter-bar">
                        <span id="meterLiveVolumeBar"></span>
                    </div>
                </div>
                <div class="meter meter-filter" id="meter-filter">
                    <span class="meter-label">FILTER</span>
                    <div class="meter-value" id="meterFilterValue">OFF</div>
                    <div class="meter-bar">
                        <span id="meterFilterBar"></span>
                    </div>
                </div>
            </div>
            <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </header>

        <!-- Section Manager Panel -->
        <div id="sectionManager" class="section-manager">
            <div class="section-manager-header">
                <h3>üìã SECCIONES</h3>
                <button id="closeManager" class="close-manager">‚úï</button>
            </div>
            <div class="section-manager-content">
                <p class="manager-hint">üëÅÔ∏è Mostrar/Ocultar | ‚ÜïÔ∏è Reordenar</p>
                <div id="sectionList" class="section-list">
                    <!-- Se genera din√°micamente -->
                </div>
            </div>
        </div>
        <div id="managerOverlay" class="manager-overlay"></div>

        <!-- Live Pads Section -->
        <section id="section-pads" class="pads-section" data-section="pads" data-title="Live Pads">
            <h2>LIVE PADS</h2>
            <div class="pads-grid" id="padsGrid">
                <!-- Los pads se generar√°n din√°micamente -->
            </div>
        </section>

        <!-- Audio Visualizer Section -->
        <section id="section-visualizer" class="visualizer-section" data-section="visualizer" data-title="Audio Visualizer">
            <div class="visualizer-grid">
                <div class="visualizer-panel visualizer-full">
                    <h3>SPECTRUM ANALYZER</h3>
                    <canvas id="spectrumCanvas" width="600" height="200"></canvas>
                </div>
            </div>
        </section>

        <!-- Sequencer Section -->
        <section id="section-sequencer" class="sequencer-section" data-section="sequencer" data-title="Sequencer">
            <div class="sequencer-header">
                <h2>SEQUENCER</h2>
                <div class="sequencer-controls">
                    <button id="playBtn" class="btn btn-play">‚ñ∂ PLAY</button>
                    <button id="stopBtn" class="btn btn-stop">‚ñ† STOP</button>
                    <button id="clearBtn" class="btn btn-clear">‚úï CLEAR</button>
                    <div class="pattern-display">
                        <span class="pattern-label">PATTERN:</span>
                        <span id="currentPatternName" class="pattern-name">HIP HOP</span>
                    </div>
                </div>
            </div>
            
            <div class="sequencer-grid-wrapper">
                <div class="sequencer-grid" id="sequencerGrid">
                    <!-- 16 tracks x 16 steps -->
                </div>
                
                <div class="step-indicator" id="stepIndicator">
                    <!-- Indicador de step actual -->
                </div>
            </div>
        </section>

        <!-- Controls Section -->
        <section id="section-controls" class="controls-section" data-section="controls" data-title="Controls">
            <div class="control-group">
                <label for="tempoSlider">TEMPO: <span id="tempoValue">110</span> BPM</label>
                <input type="range" id="tempoSlider" min="60" max="200" value="110" class="slider">
            </div>
            
            <div class="control-group">
                <label for="sequencerVolumeSlider">VOLUMEN SEQUENCER: <span id="sequencerVolumeValue">80</span>%</label>
                <input type="range" id="sequencerVolumeSlider" min="0" max="100" value="80" class="slider">
            </div>

            <div class="control-group">
                <label for="liveVolumeSlider">VOLUMEN LIVE PADS: <span id="liveVolumeValue">80</span>%</label>
                <input type="range" id="liveVolumeSlider" min="0" max="100" value="80" class="slider">
            </div>
            
            <div class="control-group">
                <label>PATTERN:</label>
                <div class="pattern-buttons">
                    <button class="btn-pattern active" data-pattern="0">HIP HOP</button>
                    <button class="btn-pattern" data-pattern="1">TECHNO</button>
                    <button class="btn-pattern" data-pattern="2">DnB</button>
                    <button class="btn-pattern" data-pattern="3">BREAK</button>
                    <button class="btn-pattern" data-pattern="4">HOUSE</button>
                </div>
            </div>
            
            <div class="control-group">
                <button id="colorToggle" class="btn-color-toggle">üé® COLOR MODE</button>
            </div>
        </section>

        <!-- FX Section -->
        <section id="section-fx" class="fx-section" data-section="fx" data-title="Sound FX">
            <h2>SOUND FX</h2>
            <div class="fx-grid">
                <div class="fx-control">
                    <label for="filterType">FILTER TYPE</label>
                    <select id="filterType" class="fx-select">
                        <option value="0">NONE</option>
                        <option value="1">LOW PASS</option>
                        <option value="2">HIGH PASS</option>
                        <option value="3">BAND PASS</option>
                        <option value="4">NOTCH</option>
                    </select>
                </div>
                
                <div class="fx-control">
                    <label for="filterCutoff">CUTOFF: <span id="filterCutoffValue">8000</span> Hz</label>
                    <input type="range" id="filterCutoff" min="100" max="16000" value="8000" class="slider">
                </div>
                
                <div class="fx-control">
                    <label for="filterResonance">RESONANCE: <span id="filterResonanceValue">1.0</span></label>
                    <input type="range" id="filterResonance" min="0.5" max="20" step="0.1" value="1.0" class="slider">
                </div>
                
                <div class="fx-control">
                    <label for="bitCrush">BIT CRUSH: <span id="bitCrushValue">16</span> bits</label>
                    <input type="range" id="bitCrush" min="4" max="16" value="16" class="slider">
                </div>
                
                <div class="fx-control">
                    <label for="distortion">DISTORTION: <span id="distortionValue">0</span></label>
                    <input type="range" id="distortion" min="0" max="100" value="0" class="slider">
                </div>
                
                <div class="fx-control">
                    <label for="sampleRate">SAMPLE RATE: <span id="sampleRateValue">44100</span> Hz</label>
                    <input type="range" id="sampleRate" min="8000" max="44100" step="1000" value="44100" class="slider">
                </div>
            </div>
        </section>

        <!-- Keyboard Shortcuts Legend -->
        <section id="section-keyboard" class="keyboard-legend" data-section="keyboard" data-title="Keyboard Shortcuts">
            <div class="legend-title">‚å®Ô∏è KEYBOARD SHORTCUTS</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <span class="legend-key">1-9, 0, Q-U</span>
                    <span class="legend-desc">Trigger Pads 1-16 (Tremolo)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-key">SPACE</span>
                    <span class="legend-desc">Play / Pause</span>
                </div>
                <div class="legend-item">
                    <span class="legend-key">[ / ]</span>
                    <span class="legend-desc">BPM +5 / -5</span>
                </div>
                <div class="legend-item">
                    <span class="legend-key">- / +</span>
                    <span class="legend-desc">Live Volume +5 / -5</span>
                </div>
                <div class="legend-item">
                    <span class="legend-key">A / S</span>
                    <span class="legend-desc">Sequencer Volume +5 / -5</span>
                </div>
            </div>
        </section>

        <!-- Device Info Section -->
        <section id="section-device" class="device-info" data-section="device" data-title="Device Info">
            <div class="info-title">üéõÔ∏è DEVICE + LIBRARY</div>
            <div class="device-cards">
                <div class="info-card emphasis">
                    <span class="info-label">Samples Loaded</span>
                    <span class="info-value" id="samplesCount">0</span>
                    <span class="info-sub" id="libraryTotals">0 files / 0 families</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Memory Used</span>
                    <span class="info-value" id="memoryUsed">0 MB</span>
                    <span class="info-sub" id="psramFree">PSRAM free ‚Äî</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Sample Format</span>
                    <span class="info-value" id="sampleFormat">44.1kHz Mono 16-bit</span>
                    <span class="info-sub">Renderer locked @ 16 voices</span>
                </div>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Sampler:</span>
                    <span class="info-value">ESP32-S3 @ 240MHz (PSRAM)</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Polyphony:</span>
                    <span class="info-value">16 voices</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Tracks:</span>
                    <span class="info-value" id="tracksInfo">16 tracks x 16 steps</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Visualizer:</span>
                    <span class="info-value">32-band spectrum</span>
                </div>
            </div>
        </section>

        <!-- Instruments Info Section -->
        <section id="section-instruments" class="device-info" data-section="instruments" data-title="Instrument Map">
            <div class="info-title">ü•Å INSTRUMENT MAP (16 TRACKS)</div>
            <div class="instrument-grid">
                <div class="instrument-card" data-family="BD">
                    <div class="inst-main">
                        <span class="inst-code">BD</span>
                        <div>
                            <div class="inst-name">Bass Drum (Bombo)</div>
                            <div class="inst-count" id="instCount-BD">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-BD">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-BD">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="SD">
                    <div class="inst-main">
                        <span class="inst-code">SD</span>
                        <div>
                            <div class="inst-name">Snare Drum (Caja)</div>
                            <div class="inst-count" id="instCount-SD">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-SD">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-SD">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="CH">
                    <div class="inst-main">
                        <span class="inst-code">CH</span>
                        <div>
                            <div class="inst-name">Closed Hi-Hat</div>
                            <div class="inst-count" id="instCount-CH">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-CH">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-CH">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="OH">
                    <div class="inst-main">
                        <span class="inst-code">OH</span>
                        <div>
                            <div class="inst-name">Open Hi-Hat</div>
                            <div class="inst-count" id="instCount-OH">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-OH">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-OH">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="CP">
                    <div class="inst-main">
                        <span class="inst-code">CP</span>
                        <div>
                            <div class="inst-name">Hand Clap (Palmas)</div>
                            <div class="inst-count" id="instCount-CP">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-CP">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-CP">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="CB">
                    <div class="inst-main">
                        <span class="inst-code">CB</span>
                        <div>
                            <div class="inst-name">Cowbell (Cencerro)</div>
                            <div class="inst-count" id="instCount-CB">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-CB">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-CB">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="RS">
                    <div class="inst-main">
                        <span class="inst-code">RS</span>
                        <div>
                            <div class="inst-name">Rim Shot (Aro)</div>
                            <div class="inst-count" id="instCount-RS">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-RS">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-RS">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="CL">
                    <div class="inst-main">
                        <span class="inst-code">CL</span>
                        <div>
                            <div class="inst-name">Claves</div>
                            <div class="inst-count" id="instCount-CL">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-CL">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-CL">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="MA">
                    <div class="inst-main">
                        <span class="inst-code">MA</span>
                        <div>
                            <div class="inst-name">Maracas</div>
                            <div class="inst-count" id="instCount-MA">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-MA">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-MA">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="CY">
                    <div class="inst-main">
                        <span class="inst-code">CY</span>
                        <div>
                            <div class="inst-name">Cymbal (Platillo)</div>
                            <div class="inst-count" id="instCount-CY">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-CY">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-CY">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="HT">
                    <div class="inst-main">
                        <span class="inst-code">HT</span>
                        <div>
                            <div class="inst-name">Hi Tom (Agudo)</div>
                            <div class="inst-count" id="instCount-HT">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-HT">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-HT">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="LT">
                    <div class="inst-main">
                        <span class="inst-code">LT</span>
                        <div>
                            <div class="inst-name">Low Tom (Grave)</div>
                            <div class="inst-count" id="instCount-LT">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-LT">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-LT">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="MC">
                    <div class="inst-main">
                        <span class="inst-code">MC</span>
                        <div>
                            <div class="inst-name">Mid Conga</div>
                            <div class="inst-count" id="instCount-MC">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-MC">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-MC">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="MT">
                    <div class="inst-main">
                        <span class="inst-code">MT</span>
                        <div>
                            <div class="inst-name">Mid Tom (Medio)</div>
                            <div class="inst-count" id="instCount-MT">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-MT">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-MT">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="HC">
                    <div class="inst-main">
                        <span class="inst-code">HC</span>
                        <div>
                            <div class="inst-name">Hi Conga</div>
                            <div class="inst-count" id="instCount-HC">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-HC">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-HC">Format: ‚Äî</span>
                    </div>
                </div>
                <div class="instrument-card" data-family="LC">
                    <div class="inst-main">
                        <span class="inst-code">LC</span>
                        <div>
                            <div class="inst-name">Low Conga</div>
                            <div class="inst-count" id="instCount-LC">‚Äî library files</div>
                        </div>
                    </div>
                    <div class="inst-meta">
                        <span class="inst-current" id="instCurrent-LC">Current: ‚Äî</span>
                        <span class="inst-quality" id="instQuality-LC">Format: ‚Äî</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>RED808 | 16-Track Drum Machine | ESP32-S3 Dual Core</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
